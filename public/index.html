<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> SQ와 프로소디 간 상관관계 연구 | SoulSpectrum</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="container">
    <div class="progress-container"><div class="progress-bar" id="progressBar"></div></div>

  <section id="step1" class="step active">
    <h2 class="title">프로젝트-RHYTHME</h2>
    <div class="research-intro">
        <p>본 연구는 <strong>(주)소울스펙트럼(SoulSpectrum Inc.)</strong>에서 주관하며, 
        음성 특징과 SQ(Systemizing Quotient)의 상관관계를 분석하여 신경다양성 특성을 정밀 프로파일링하는 것을 목적으로 합니다.</p>
        
        <hr style="border: 0; border-top: 1px solid #333; margin: 24px 0 12px 0;">
        <p class="pi-info">연구책임자: 맹난영</p>
    </div>
    
    <div class="button-group" style="margin-top: 40px;">
        <button class="next-btn" onclick="startResearch(false)">14세 이상 연구 참여하기</button>
        <button class="next-btn secondary-btn" style="margin-top: 16px;" onclick="startResearch(true)">
            14세 미만 연구 참여하기 (보호자 동의 필요)
        </button>
    </div>
</section>

<section id="step2" class="step">
    <h3 class="title">연구 참여 동의</h3>
    <div class="consent-group">
        <div class="consent-item" id="parentalConsentItem" style="display: none;">
            <div class="consent-header" onclick="loadAndToggleConsent('child', this)">
                <input type="checkbox" class="essential" id="checkParent" onclick="event.stopPropagation()">
                <div class="header-text">
                    <span class="subject">법정대리인 동의</span>
                    <span class="badge">필수</span>
                </div>
                <span class="arrow">▼</span>
            </div>
            <div class="consent-content">
                <div class="consent-text-area">내용을 불러오는 중...</div>
            </div>
        </div>

        <div class="consent-item">
            <div class="consent-header" onclick="loadAndToggleConsent('personal.txt', this)">
                <input type="checkbox" class="essential" id="check1" onclick="event.stopPropagation()">
                <div class="header-text">
                    <span class="subject">개인정보 수집 및 이용</span>
                    <span class="badge">필수</span>
                </div>
                <span class="arrow">▼</span>
            </div>
            <div class="consent-content">
                <div class="consent-text-area">내용을 불러오는 중...</div>
            </div>
        </div>

        <div class="consent-item">
            <div class="consent-header" onclick="loadAndToggleConsent('voice', this)">
                <input type="checkbox" class="essential" id="check2" onclick="event.stopPropagation()">
                <div class="header-text">
                    <span class="subject">음성정보 처리 동의</span>
                    <span class="badge">필수</span>
                </div>
                <span class="arrow">▼</span>
            </div>
            <div class="consent-content">
                <div class="consent-text-area">내용을 불러오는 중...</div>
            </div>
        </div>
    </div>
    <button class="next-btn" onclick="checkAndGo()">동의 완료 및 다음</button>
</section>

  <section id="step3" class="step">
    <h3 class="title">기본 정보 입력</h3>
    
    <div class="input-group">
        <label class="label">닉네임</label>
        <input type="text" id="nickname" placeholder="익명 가능합니다">
    </div>

    <div class="input-group">
        <label class="label">비밀 PIN (4자리)</label>
        <input type="password" id="userPin" maxlength="4" inputmode="numeric" placeholder="숫자 4자리 입력">
        <p class="description" style="font-size: 11px; margin-top: 5px;">* 리포트 조회 및 데이터 삭제 시 반드시 필요합니다. 분실 시 복구가 불가능합니다.</p>
    </div>

    <div class="input-group last">
        <label class="label">만 나이</label>
        <input type="number" id="age" placeholder="숫자만 입력">
    </div>

    <label class="label">성별</label>
<div class="gender-group">
    <div class="gender-item">
        <input type="radio" name="gender" id="male" value="male" checked>
        <label for="male" class="gender-label">남성</label>
    </div>
    <div class="gender-item">
        <input type="radio" name="gender" id="female" value="female">
        <label for="female" class="gender-label">여성</label>
    </div>
</div>
        
       <label class="label">해당하는 진단 정보</label>
    <p class="description">중복 선택이 가능합니다.</p>
    <div class="chip-group">
        <div class="chip" onclick="toggleDiagnosis(this, 'ASD')">ASD</div>
        <div class="chip" onclick="toggleDiagnosis(this, 'ADHD')">ADHD</div>
        <div class="chip" onclick="toggleDiagnosis(this, 'HSP')">HSP</div>
        <div class="chip" onclick="toggleDiagnosis(this, 'None')">해당 없음</div>
    </div>

    <button class="next-btn" style="margin-top: 40px;" onclick="validateStep3()">체계화 지수 SQ 테스트 시작</button>
</section>

 <section id="step4" class="step">
    <div id="questionCount" class="step-indicator">1 / 10</div>
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <h3 id="questionText" class="question-title"></h3>

    <div class="answer-group">
        <button class="ans-btn" onclick="handleAnswer(0)">전혀 아니다</button>
        <button class="ans-btn" onclick="handleAnswer(1)">약간 그렇다</button>
        <button class="ans-btn" onclick="handleAnswer(2)">상당히 그렇다</button>
        <button class="ans-btn" onclick="handleAnswer(3)">매우 그렇다</button>
    </div>
</section>

<section id="step5" class="step">
    <h3 class="title">qEEG 업로드</h3>
    <p class="description">
        보유하신 파일을 업로드해 주세요. EC와 EO는 오른쪽 상단에 표기되어 있습니다. 
        잘 모르시거나 한 장만 보유하고 있다면 아무 곳에나 올려주세요. (선택사항)
    </p>
    
    <div class="upload-unit">
        <div class="qeeg-box">
            <div class="qeeg-info-text">
                <span class="qeeg-type">EC</span>
                <span class="description" style="margin-bottom:0;">(눈 감았을 때)</span>
            </div>
            <span id="ecStatus" class="qeeg-status">미첨부</span>
        </div>
        <input type="file" id="qeegEC" style="display:none" onchange="updateFileName('EC')">
        <button class="next-btn file-btn" onclick="document.getElementById('qeegEC').click()">파일 선택</button>
    </div>

    <div style="height: 24px;"></div> <div class="upload-unit">
        <div class="qeeg-box">
            <div class="qeeg-info-text">
                <span class="qeeg-type">EO</span>
                <span class="description" style="margin-bottom:0;">(눈 떴을 때)</span>
            </div>
            <span id="eoStatus" class="qeeg-status">미첨부</span>
        </div>
        <input type="file" id="qeegEO" style="display:none" onchange="updateFileName('EO')">
        <button class="next-btn file-btn" onclick="document.getElementById('qeegEO').click()">파일 선택</button>
    </div>

    <button class="next-btn" style="margin-top: 40px;" onclick="submitAll()">최종 제출</button>
</section>

    <section id="step6" class="step">
        <div class="success-icon">✅</div>
        <h2>참여해주셔서 감사합니다!</h2>
        <p>전송된 데이터는 <strong>(주)소울스펙트럼</strong> 연구의 소중한 자산이 됩니다.</p>
    </section>
</div>

<footer class="admin-footer">
    <p>&copy; 2026 SoulSpectrum Inc. All Rights Reserved.</p>
</footer>

<script src="app.js"></script>
</body>
</html>