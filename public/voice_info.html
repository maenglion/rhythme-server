<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="styles.css">
    <title>음성 분석 안내</title>
    <style>
   /* 전체 레이아웃을 화면 중앙으로 배치 */
   body {
    margin: 0;
    padding: 0;
    background-color: #121212;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    color: #fff;
    font-family: 'Pretendard', sans-serif;
}

/* 컨테이너: 버튼 사이즈에 맞춰 너비 확장 */
.container {
    width: 100%;
    /* 버튼의 최대 너비와 일치하도록 설정 */
    max-width: 400px; 
    padding: 40px 24px;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
}

/* 설명 문구 텍스트 크기 상향 */
.guide-desc {
    color: #A0A0A0;
    /* 기존보다 1단계 키운 사이즈 */
    font-size: 15px; 
    line-height: 1.7;
    margin: 0;
    word-break: keep-all;
}

/* 가이드 항목 간격 조정 */
.guide-item {
    margin-bottom: 32px;
}

.guide-title {
    display: block;
    color: #BB86FC;
    font-weight: 700;
    font-size: 18px;
    margin-bottom: 10px;
}

/* 테스트 구성 박스 내부 간격 */
.test-config-box {
    background: #1E1E1E;
    border-radius: 12px;
    padding: 28px;
    margin-bottom: 40px;
}

.config-text {
    font-size: 17px;
    font-weight: 600;
    line-height: 1.6;
}

/* 하단 알림 영역 */
.permission-alert {
    background: rgba(187, 134, 252, 0.05);
    border: 1px dashed rgba(187, 134, 252, 0.5);
    border-radius: 12px;
    padding: 20px;
    margin: 20px 0 40px 0;
    text-align: center;
}

/* 확인 버튼: 너비 100% 유지 */
.next-btn {
    width: 100%;
    height: 56px;
    background-color: #FFFFFF;
    color: #000000;
    border: none;
    border-radius: 12px;
    font-size: 18px;
    font-weight: 700;
    cursor: pointer;
}
  </style>
</head>
<body style="display: block;"> <div class="container">
        <div class="progress-container">
            <div class="progress-bar" style="width: 85%;"></div>
        </div>

        <header>
            <h1 class="title">음성 분석 테스트<br>진행 가이드</h1>
            <p class="description">정확한 분석을 위해 아래 내용을 숙지해 주세요.</p>
        </header>

        <main>
            <div class="research-intro" style="margin-top: 24px;">
                <span class="badge" style="margin-bottom: 12px; display: inline-block;">테스트 구성</span>
                <p style="line-height: 1.6; color: #FFF;">
                    본 테스트는 총 <strong>4가지 스테이지</strong>로 구성되어 있으며, 각 문항당 <strong>최대 40초</strong>의 시간이 주어집니다.
                </p>
            </div>

            <div class="input-group">
                <label class="label">주변 환경 확인</label>
                <p class="description">TV 소리나 대화 소리가 들리지 않는 조용한 독립된 공간에서 진행해 주셔야 분석 데이터의 오차가 줄어듭니다.</p>

                <label class="label">마이크 거리 및 위치</label>
                <p class="description">스마트폰을 추천하며 15~20cm 거리를 유지하고, 숨소리가 직접 들어가지 않도록 정면보다는 살짝 옆에서 말씀해 주세요.</p>

                <label class="label">발성 및 태도</label>
                <p class="description">일부러 목소리를 꾸미지 말고, 평소 지인과 대화하듯 가장 편안하고 자연스러운 목소리로 읽어주시는 것이 가장 좋습니다.</p>
            
            <label class="label">소음 감지 후 시작 </label>
                <p class="description">버튼을 누르시고 2초 후에 시작해 주세요.</p>

                  <label class="label">40초간 녹음</label>
                <p class="description">40초 이후 다음 화면으로 넘어갑니다.</p>
            
            </div>

        <div class="pi-info" style="border-top: 1px solid #333; padding-top: 20px; margin-top: 24px;">
    <div style="background: rgba(187, 134, 252, 0.1); border-radius: 8px; padding: 16px; border: 1px dashed #BB86FC;">
        <p style="color: #BB86FC; font-size: 14px; font-weight: 700; margin: 0; line-height: 1.6; word-break: keep-all;">
            ⚠️ 녹음 시작 버튼 클릭 시 '마이크 사용 권한' 허용 창이 뜨면 반드시 [허용]을 눌러주셔야 테스트가 가능합니다.
        </p>
    </div>
</div>
        </main>

        <button id="goStage" class="next-btn" style="margin-top: 40px;">확인했습니다</button>

        <footer>
            © 2026 SoulSpectrum.Inc. All rights reserved.
            개인정보책임자 : 맹난영   maengnanyoung@gmail.com
        </footer>
    </div>

    <script>
     
  function getSid() {
    const urlSid = new URLSearchParams(location.search).get("sid");
    const storeSid = localStorage.getItem("SESSION_ID");
    const winSid = window.SESSION_ID;
    const sid = urlSid || storeSid || winSid;

    if (!sid) {
      if (typeof window.showModal === "function") {
        window.showModal("세션이 없습니다. 처음부터 다시 진행해주세요.");
        setTimeout(() => location.href = "./index.html", 300);
      } else {
        alert("세션이 없습니다. 처음부터 다시 진행해주세요.");
        location.href = "./index.html";
      }
      return null;
    }

    window.SESSION_ID = sid;
    localStorage.setItem("SESSION_ID", sid);
    return sid;
  }

  // ✅ 버튼 클릭 시 sid를 URL로 물고 간다
  document.getElementById('goStage').onclick = () => {
    const sid = getSid();
    if (!sid) return;
    location.href = `voice_test.html?sid=${encodeURIComponent(sid)}`;
  };
</script>

</body>
</html>