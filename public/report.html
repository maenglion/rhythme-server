<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>분석 리포트</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" />
  <style>
    :root { 
      --primary: #BB86FC; 
      --primary-variant: #3700B3;
      --secondary: #03DAC6;
      --bg: #0F0F12; 
      --card: #1E1E26; 
      --muted: #A0A0AB; 
      --border: rgba(255,255,255,0.08);
    }

    body { 
      margin: 0; 
      background: var(--bg); 
      color: #F4F4F5; 
      font-family: 'Pretendard', system-ui; 
      line-height: 1.6;
    }

    .container { max-width: 900px; margin: 0 auto; padding: 40px 20px; }

    /* Header Section */
    .header { margin-bottom: 32px; }
    .header-top { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px; }
    .title-area h1 { font-size: 28px; font-weight: 800; margin: 0; letter-spacing: -0.5px; }
    .session-area { 
      display: flex; 
      align-items: center; 
      background: rgba(255,255,255,0.05); 
      padding: 4px 12px; 
      border-radius: 8px; 
      font-size: 12px; 
      color: var(--muted);
    }
    .copy-btn { 
      background: none; border: none; color: var(--primary); 
      cursor: pointer; font-size: 11px; margin-left: 8px; font-weight: 700;
      text-decoration: underline;
    }

    /* Cards */
    .card { 
      background: var(--card); 
      border: 1px solid var(--border); 
      border-radius: 20px; 
      padding: 24px; 
      margin-bottom: 20px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.2);
    }
    
    .section-title { font-size: 16px; font-weight: 700; margin-bottom: 16px; display: flex; align-items: center; gap: 8px; }
    .section-title::before { content:''; display:block; width:4px; height:16px; background:var(--primary); border-radius:2px; }

    /* Badges */
    .badge-group { display: flex; gap: 8px; margin-top: 12px; }
    .badge { padding: 4px 12px; border-radius: 6px; font-size: 12px; font-weight: 600; background: rgba(255,255,255,0.1); }
    .badge.primary { color: var(--primary); border: 1px solid rgba(187,134,252,0.3); }

    /* Tables */
    .table-container { overflow-x: auto; }
    table { width: 100%; border-collapse: collapse; margin-top: 8px; }
    th { text-align: left; padding: 12px 8px; font-size: 13px; color: var(--muted); border-bottom: 1px solid var(--border); }
    td { padding: 14px 8px; font-size: 14px; border-bottom: 1px solid var(--border); }

    /* Grid Layout */
    .grid-container { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
    @media (max-width: 768px) { .grid-container { grid-template-columns: 1fr; } }

    /* Utilities */
    .sub-text { color: var(--muted); font-size: 14px; }
    canvas { width: 100%; height: 200px; margin-top: 10px; }
    .footer-note { font-size: 12px; color: #666; text-align: center; margin-top: 40px; }
  </style>
</head>
<body>

<div class="container">
  <header class="header">
    <div class="header-top">
      <div class="title-area">
        <h1>분석 리포트</h1>
        <p class="sub-text" id="generatedAt">생성일: 2023.10.27</p>
      </div>
      <div class="session-area">
        ID: <span id="sidText" style="margin-left:4px;">865e88b7...</span>
        <button class="copy-btn" id="copySidBtn">복사</button>
      </div>
    </div>
    <div class="badge-group">
      <span class="badge" id="qualityBadge">품질: 우수</span>
      <span class="badge" id="baselineBadge">Baseline: 설정됨</span>
    </div>
  </header>

  <div class="card">
    <div id="personaTitle" style="font-size: 20px; font-weight: 800; color: var(--primary); margin-bottom: 8px;">
      분석 데이터 로딩 중...
    </div>
    <p id="personaSummary" class="sub-text">세션 분석을 통해 도출된 인사이트가 여기에 표시됩니다.</p>
  </div>

  <div class="grid-container">
    <div class="card">
      <div class="section-title">3D 분석 매트릭스</div>
      <div class="table-container">
        <table>
          <thead>
            <tr><th>축</th><th>근거</th><th>해석</th></tr>
          </thead>
          <tbody id="matrixBody">
            <tr><td colspan="3" class="sub-text" style="text-align:center;">데이터를 불러오는 중입니다...</td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="card">
      <div class="section-title">스테이지 변화 추이</div>
      <canvas id="chart"></canvas>
      <div id="chartLegend" class="sub-text" style="margin-top:12px; font-size:12px;"></div>
    </div>
  </div>

  <div class="card">
    <div class="section-title">스테이지별 상세 지표</div>
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>Stage</th>
            <th>상태</th>
            <th>Rate</th>
            <th>Pause</th>
            <th>Pitch</th>
            <th>SNR</th>
          </tr>
        </thead>
        <tbody id="stageTableBody">
          <tr><td colspan="6" class="sub-text" style="text-align:center;">로딩 중...</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <footer class="footer-note">
    본 리포트는 연구용 요약이며 의료 진단 목적으로 사용할 수 없습니다.
  </footer>
</div>

<script src="./runtime-config.js?v=1"></script>
<script src="./session-guard.js"></script>
<script src="./report.js"></script>

</body>
</html>